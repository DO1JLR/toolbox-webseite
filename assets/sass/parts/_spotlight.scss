/* Spotlight */

.spotlight {
    background-attachment:	fixed;
    background-position:	center center;
    background-size:		cover;
    box-shadow: 0 0.25em 0.5em 0 rgba(0,0,0,0.25);
    background-image: none;
    min-height: 42em;
    height: 100vh;
    overflow: hidden;
    position: relative;

    // Force spotlights to stack in reverse order (needed for our box
    // shadows to overlap stuff in the right direction).
    @for $i from 1 through _misc(max-spotlight) {
        &:nth-last-of-type(#{$i}) {
            z-index: #{$i};
        }
    }

    &:before {
        content: '';
        display: block;
        height: 100%;
        left: 0;
        top: 0;
        width: 100%;
    }

    .image.main {
        display: block;

        img {
            position: relative;
        }
    }

    .content {
        @include vendor('transform', 'translate(0,0)');
        @include vendor('transition', 'transform 1s ease, opacity 1s ease');
        background: _palette(bg-very-transparent);
        border-style: solid;
        opacity: 1;
        position: absolute;
    }

    .goto-next {
        @include vendor('transform', 'translate(0,0)');
        @include vendor('transition', 'transform 0.75s ease, opacity 1s ease-in');
        @include vendor('transition-delay', '0.5s');
        opacity: 1;
    }

    &.top, &.bottom {
        .content {
            left: 0;
            padding: ($size-wrapper-pad-tb * 0.85) 0 (($size-wrapper-pad-tb * 0.85) - _size(element-margin)) 0;
            width: 100%;
        }
    }

    &.top {
        .content {
            border-bottom-width: 0.35em;
            top: 0;
        }
    }

    &.bottom {
        .content {
            border-top-width: 0.35em;
            bottom: 0;
        }
    }

    &.left, &.right {
        .content {
            height: 101%;
            padding: $size-wrapper-pad-tb $size-wrapper-pad-lr;
            top: 0;
            width: 28em;
            min-width: 25%;
        }
    }

    &.left {
        .content {
            border-right-width: 0.35em;
            left: 0;
        }
    }

    &.right {
        .content {
            border-left-width: 0.35em;
            right: 0;
        }
    }

    &.style1 {
        .content {
            border-color: _palette(accent1-transparent);
        }
    }

    &.style2 {
        .content {
            border-color: _palette(accent1);
        }
    }

    &.style3 {
        .content {
            border-color: _palette(accent4);
        }
    }

    &.inactive {
        .content {
            opacity: 0;
        }

        .goto-next {
            @include vendor('transform', 'translate(0,1.5em)');
            opacity: 0;
        }

        &.top {
            .content {
                @include vendor('transform', 'translate(0,-5em)');
            }
        }

        &.bottom {
            .content {
                @include vendor('transform', 'translate(0,5em)');
            }
        }

        &.left {
            .content {
                @include vendor('transform', 'translate(-5em,0)');
            }
        }

        &.right {
            .content {
                @include vendor('transform', 'translate(5em,0)');
            }
        }
    }
}

body.is-touch {
    .spotlight {
        background-attachment: scroll;
    }
}